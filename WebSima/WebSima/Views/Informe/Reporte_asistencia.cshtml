@{
    ViewBag.Title = "Reporte de asistencia";
    SelectList materias = ViewBag.materias;
    List<String[]> asistencia = ViewBag.asistencia;
    List<WebSima.Models.WebApi.EstudianteMateria> datos_estudiante = ViewBag.datos_estudiante;
    String asignatura = ViewBag.asignatura;
}

<div>
    <ol class="breadcrumb " style="background-color: #ffffff">
        <li class="breadcrumb-item ">Home</li>
        <li class="breadcrumb-item active">Informe</li>

    </ol>
</div>

<div class="box box-success">
    <div class="box-header with-border">
        
        @using (Html.BeginForm("Reporte_asistencia", "Informe", FormMethod.Get, new { }))
{
    <div class="col-sm-12  ">

        <h3 class="">
            Asignaturas
        </h3>
        <div class="form-group">
            <div class="input-group">
                <div class="input-group col-sm-8 ">
                    @Html.DropDownList("materia", materias, asignatura,
                           new { @class = "form-control select2", style = "width: 100%" })

                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-success">Buscar</button>
                    </span>
                </div>
                <!-- /input-group -->
            </div>

        </div>
    </div>

}

       
    </div>
    <div class="box-body ">

        <div class="box-tools pull-right">


        </div>


        <div class="col-sm-12 table-responsive panelBorder">
            <table class="table tablaPaginacion table-bordered table-hover">
                <thead>
                    <tr>
                        <th>IDENTIFICACÓN</th>
                        <th>NOMBRE COMPLETO</th>
                        <th>PROGRAMA</th>
                        <th>ASISTENCIA</th>
                    </tr>
                </thead>
                <tbody>
                    @{
                        int i = 0;

                        foreach (String[] item in asistencia)
                        {
                            var estudiante = datos_estudiante.Where(e => e.num_identificacion.Equals(item[1])).Select(e => new { e.nom_largo, e.nom_prog_matricula_estudiante }).Distinct().ToArray();
                            // var estudiante = datos_estudiante.Select(e => e).Where(e => e.num_identificacion.Equals(item[1])).Distinct();
                            <tr>
                                <td><center>@(i++)</center> </td>
                                <td>@item[1]</td>
                                <td>@estudiante[0].nom_largo</td>
                                <td>@estudiante[0].nom_prog_matricula_estudiante</td>
                                <td>@item[0]</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>

            <a href="#" class="btn btn-success fa fa-plus-square"> Exportar</a>
        </div>
    </div>
    <!-- /.box-body -->
   
</div>


<script>
    $(document).ready(function () {
        $('.select2').select2();
        // se configura la tabla, esta funcion está en helper.js
        configurar_dataTable("tablaPaginacion");
    });
</script>


